var Dashboard = function() {
    return{initChat: function() {
            var e = $("#chats"), t = $(".chats", e), a = $(".chat-form", e), i = $("input", a), l = $(".btn", a), o = function(a) {
                a.preventDefault();
                var l = i.val();
                if (0 != l.length) {
                    var o = new Date, n = o.getHours() + ":" + o.getMinutes(), r = "";
                    r += '<li class="out">', r += '<img class="avatar" alt="" src="img/avatar1.jpg"/>', r += '<div class="message">', r += '<span class="arrow"></span>', r += '<a href="#" class="name">Bob Nilson</a>&nbsp;', r += '<span class="datetime">at ' + n + "</span>", r += '<span class="body">', r += l, r += "</span>", r += "</div>", r += "</li>";
                    t.append(r);
                    i.val("");
                    var s = function() {
                        var t = 0;
                        return e.find("li.out, li.in").each(function() {
                            t += $(this).outerHeight()
                        }), t
                    };
                    e.find(".scroller").slimScroll({scrollTo: s()})
                }
            };
            $("body").on("click", ".message .name", function(e) {
                e.preventDefault();
                var t = $(this).text();
                i.val("@" + t + ":"), App.scrollTo(i)
            }), l.click(o), i.keypress(function(e) {
                return 13 == e.which ? (o(e), !1) : void 0
            })
        }, initAdjustment: function() {
            function loading(callback) {
                var over = "<div id='overlay'><img id='loading' src='img/loading.gif' alt='Loading...'></div>";
                $(over).appendTo("body");

                callback();
            }

            function adjustChatSize() {
                var browserH = $(window).height();
                $("#chat-container").css("height", browserH - 17 + "px");
                $("#chats div.slimScrollDiv").css("height", parseInt(browserH - 162) + "px");
                $("#main-chats").css("height", parseInt(browserH - 162) + "px");

                setTimeout(function() {
                    $("#overlay").remove();
                }, 800);
            }

            loading(function() {
                adjustChatSize();
            });

            $(window).on("resize", function() {
                loading(function() {
                    adjustChatSize();
                });
            });

        }, init: function() {
            this.initChat();
            this.initAdjustment();
        }};
}();

App.isAngularJsApp() === !1 && jQuery(document).ready(function() {
    Dashboard.init();
});